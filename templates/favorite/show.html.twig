{% extends 'base.html.twig' %}
{% block title %}Mes Favoris{% endblock %}

{% block body %}
<div class="bg-gray-100 min-h-screen">
    <!-- Hero Section -->
    <div class="bg-primary py-8">
        <div class="container mx-auto px-4">
            <div class="text-center">
                <h1 class="text-4xl font-bold text-gray-800 font-playfair">
                    <i class="fas fa-heart text-gray-900 mr-2"></i>Mes Favoris
                </h1>
                <p class="text-gray-500 text-lg font-playfair">
                    Retrouvez tous vos véhicules favoris et ne manquez jamais une occasion de les conduire.
                </p>
            </div>
        </div>
    </div>

    <!-- Content Section -->
    <div class="container mx-auto px-4 -mt-8">
        {% if favorites is empty %}
            <div class="bg-white rounded-xl shadow-xl p-12 text-center max-w-2xl mx-auto">
                <div class="mb-6">
                    <i class="far fa-heart text-7xl text-[#8B4513]"></i>
                </div>
                <h2 class="text-3xl font-playfair font-bold text-[#8B4513] mb-4">
                    Votre liste de favoris est vide
                </h2>
                <p class="text-gray-600 text-lg mb-8 max-w-md mx-auto">
                    Explorez notre collection et ajoutez vos véhicules préférés pour les retrouver facilement.
                </p>
                <a href="{{ path('app_collections') }}" 
                   class="inline-flex items-center bg-[#8B4513] text-[#F5F5F0] px-8 py-4 rounded-lg hover:bg-[#734010] transition-all duration-300 font-playfair text-lg group">
                    <span class="mr-3">Explorer la collection</span>
                    <i class="fas fa-arrow-right transition-transform duration-300 group-hover:translate-x-2"></i>
                </a>
            </div>
        {% else %}
            <!-- Filters and Sort -->
            <div class="bg-white rounded-xl shadow-xl p-6 mb-8 mt-6 hover:shadow-lg hover:scale-105 transition-all duration-500 ease-in-out">
                <div class="flex flex-wrap items-center justify-between gap-4">
                    <div class="flex items-center space-x-4">
            <span class="text-[#8B4513] font-playfair">
                <i class="fas fa-heart mr-2"></i>
                {{ favorites|length }} véhicule(s) en favoris
            </span>
                    </div>
                    <div class="flex items-center space-x-4">
                        <button class="text-[#8B4513] hover:text-[#734010] transition-colors duration-300 ease-in-out">
                            <i class="fas fa-sort-amount-down mr-2"></i>
                            Prix décroissant
                        </button>
                    </div>
                </div>
            </div>

            <!-- Vehicles Grid -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 pb-16">
                {% for favorite in favorites %}
                    {% for vehicle in favorite.vehicles %}
                        {% include 'parts/card/favorite/_vehicle_card_favorite.html.twig' with {'vehicle': vehicle} %}
                    {% endfor %}
                {% endfor %}
            </div>
        {% endif %}
    </div>
</div>

    <!-- Scroll to top button -->
    <button id="scrollToTopBtn" class="fixed bottom-6 right-6 bg-primary text-white rounded-full p-4 shadow-lg border-2 border-gray-900 hover:bg-primary/10 transition-all duration-300 ease-in-out" style="display: none;">
        <i class="fas fa-arrow-up text-xl text-gray-900"></i>
    </button>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const scrollToTopBtn = document.getElementById('scrollToTopBtn');
            const footer = document.querySelector('footer'); // Sélectionne le footer
            const footerHeight = footer ? footer.offsetHeight : 0; // Récupère la hauteur du footer

            // Masque le bouton au début
            scrollToTopBtn.style.display = "none";

            // Affiche le bouton lorsque l'utilisateur défile de plus de 150px
            window.onscroll = function() {
                if (document.body.scrollTop > 150 || document.documentElement.scrollTop > 150) {
                    scrollToTopBtn.style.display = "block";
                } else {
                    scrollToTopBtn.style.display = "none";
                }
            };

            // Ajuste la position du bouton lors du redimensionnement de la fenêtre
            window.addEventListener('resize', function() {
                const footerHeight = footer ? footer.offsetHeight : 0;
                scrollToTopBtn.style.bottom = `${footerHeight + 20}px`; // Ajoute 20px d'espace entre le bouton et le footer
            });

            // Fonction pour faire défiler la page jusqu'en haut lorsqu'on clique sur le bouton
            scrollToTopBtn.onclick = function() {
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            };
        });
    </script>
{% endblock %}

