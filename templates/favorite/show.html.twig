{% extends 'base.html.twig' %}
{% block title %}Vos Favoris{% endblock %}

{% block body %}
<div class="bg-[#F5F5F0] min-h-screen">
    <!-- Hero Section -->
    <div class="bg-[#8B4513] py-16">
        <div class="container mx-auto px-4">
            <div class="text-center">
                <h1 class="text-5xl font-playfair font-bold text-[#F5F5F0] mb-4">
                    Vos Favoris
                </h1>
                <div class="w-24 h-1 bg-[#F5F5F0] mx-auto mb-4"></div>
                <p class="text-[#F5F5F0]/90 text-lg font-playfair">
                    Retrouvez votre sélection de véhicules d'exception
                </p>
            </div>
        </div>
    </div>

    <div class="container mx-auto px-4 -mt-8">
        {% if favorites is empty %}
            <div class="bg-white rounded-xl shadow-xl p-12 text-center max-w-2xl mx-auto">
                <div class="mb-6">
                    <i class="far fa-heart text-7xl text-[#8B4513]"></i>
                </div>
                <h2 class="text-3xl font-playfair font-bold text-[#8B4513] mb-4">
                    Votre liste de favoris est vide
                </h2>
                <p class="text-gray-600 text-lg mb-8 max-w-md mx-auto">
                    Explorez notre collection et ajoutez vos véhicules préférés pour les retrouver facilement.
                </p>
                <a href="{{ path('app_collections') }}" 
                   class="inline-flex items-center bg-[#8B4513] text-[#F5F5F0] px-8 py-4 rounded-lg hover:bg-[#734010] transition-all duration-300 font-playfair text-lg group">
                    <span class="mr-3">Explorer la collection</span>
                    <i class="fas fa-arrow-right transition-transform duration-300 group-hover:translate-x-2"></i>
                </a>
            </div>
        {% else %}
            <div class="bg-white rounded-xl shadow-xl p-6 mb-8">
                <div class="flex flex-wrap items-center justify-between gap-4">
                    <div class="flex items-center space-x-4">
                        {% set totalVehicles = 0 %}
                        {% for favorite in favorites %}
                            {% set totalVehicles = totalVehicles + favorite.vehicles|length %}
                        {% endfor %}
                        {{ totalVehicles }} véhicule(s) en favoris
                    </div>
                    <div class="flex items-center space-x-4">
                        <button class="text-[#8B4513] hover:text-[#734010] transition-colors duration-300">
                            <i class="fas fa-sort-amount-down mr-2"></i>
                            Prix décroissant
                        </button>
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 pb-16">
                {% for favorite in favorites %}
                    {% for vehicle in favorite.vehicles %}
                        {% include 'parts/card/favorite/_vehicle_card_favorite.html.twig' with {'vehicle': vehicle} %}
                    {% endfor %}
                {% endfor %}
            </div>
        {% endif %}
    </div>
</div>

<button id="scrollToTop" 
        class="fixed bottom-8 right-8 bg-[#8B4513] text-[#F5F5F0] p-4 rounded-full shadow-lg hover:bg-[#734010] transition-all duration-300 opacity-0 invisible">
    <i class="fas fa-arrow-up"></i>
</button>
{% endblock %}

{% block javascripts %}
{{ parent() }}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const scrollToTopButton = document.getElementById('scrollToTop');
        
        window.addEventListener('scroll', () => {
            if (window.pageYOffset > 300) {
                scrollToTopButton.classList.remove('opacity-0', 'invisible');
                scrollToTopButton.classList.add('opacity-100');
            } else {
                scrollToTopButton.classList.add('opacity-0');
                scrollToTopButton.classList.remove('opacity-100');
                setTimeout(() => {
                    if (window.pageYOffset <= 300) {
                        scrollToTopButton.classList.add('invisible');
                    }
                }, 300);
            }
        });

        scrollToTopButton.addEventListener('click', () => {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });
    });
</script>
{% endblock %}