<header class="sticky top-0 z-50 bg-gray-900 shadow-md font-playfair">
    <div class="container mx-auto flex justify-between items-center py-4">
        <!-- Logo et Texte -->
        <a href="{{ path('app') }}" class="flex items-center" aria-label="Retour à la page d'accueil">
            <img src="{{ asset('template-html/assets/images/logo.svg') }}" alt="Logo" class="h-20 w-auto">
        </a>

        <!-- Hamburger menu -->
        <div class="lg:hidden">
            <button id="hamburger" class="text-white focus:outline-none focus:ring-2 focus:ring-white" aria-label="Menu mobile">
                <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path>
                </svg>
            </button>
        </div>

        <!-- Navigation (Desktop) -->
        <nav class="hidden lg:flex md:flex-grow justify-center">
            <ul class="flex justify-center space-x-2 text-white">
                <li><a href="{{ path('app') }}" class="hover:bg-gray-700 hover:rounded-lg px-4 py-2 transition-all duration-300 font-playfair mr-2" aria-label="Page d'accueil">
                        <i class="fas fa-home mr-2"></i>Accueil
                    </a></li>
                <li><a href="{{ path('app_collections') }}" class="hover:bg-gray-700 hover:rounded-lg px-4 py-2 transition-all duration-300 font-playfair" aria-label="Collections de véhicules">
                        <i class="fas fa-car mr-2"></i>Véhicules
                    </a></li>
                {% if app.user %}
                    {% if is_granted('ROLE_ADMIN') %}
                        <li><a href="{{ path('admin_dashboard') }}" class="hover:bg-gray-700 hover:rounded-lg px-4 py-2 transition-all duration-300 font-playfair" aria-label="Tableau de bord administrateur">
                                <i class="fas fa-cogs mr-2"></i>Administrateur
                            </a></li>
                    {% endif %}

                    <!-- Empêche les administrateurs de voir les sections suivantes -->
                    {% if not is_granted('ROLE_ADMIN') %}
                        <li><a href="{{ path('app_favorite_show') }}" class="hover:bg-gray-700 hover:rounded-lg px-4 py-2 transition-all duration-300 font-playfair" aria-label="Liste des favoris">
                                <i class="fas fa-heart mr-2"></i>Favoris
                            </a></li>
                        <li><a href="{{ path('app_all_reservation', {'clientId': app.user.id}) }}" class="hover:bg-gray-700 hover:rounded-lg px-4 py-2 transition-all duration-300 font-playfair" aria-label="Réservations">
                                <i class="fas fa-calendar-check mr-2"></i>Réservations
                            </a></li>
                        <li><a href="{{ path('app_invoice', {'clientId': app.user.id}) }}" class="hover:bg-gray-700 hover:rounded-lg px-4 py-2 transition-all duration-300 font-playfair" aria-label="Factures">
                                <i class="fas fa-file-invoice mr-2"></i>Factures
                            </a></li>
                    {% endif %}

                    <li class="relative">
                        <a href="{{ path('app_notifications') }}" class="hover:bg-gray-700 hover:rounded-lg px-4 py-2 transition-all duration-300 font-playfair" aria-label="Notifications">
                            <i class="fas fa-bell mr-2"></i>Notifications
                            {% if unread_notifications_count > 0 %}
                                <span class="absolute -top-1 -right-1 bg-red-500 text-white text-sm font-bold rounded-full h-4 w-4 flex items-center justify-center notification-badge text-center leading-none">
                    </span>
                            {% endif %}
                        </a>
                    </li>
                {% endif %}
                <li><a href="{{ path('app_contact') }}"
                       class="hover:bg-gray-700 hover:rounded-lg px-4 py-2 transition-all duration-300 font-playfair"
                       aria-label="Contact">
                        <i class="fas fa-envelope mr-2"></i>Contact
                    </a>
                </li>
            </ul>
        </nav>

        <!-- Profil et Connexion (Desktop) -->
        <div class="hidden lg:flex items-center space-x-2 relative">
            {% if app.user %}
                <a href="{{ path('app_profile') }}" class="hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-all duration-300 font-playfair" aria-label="Profil utilisateur">
                    <i class="fas fa-user mr-2"></i>{{ app.user.firstName }}
                </a>
                <a href="{{ path('app_logout') }}" class="hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-all duration-300 font-playfair" aria-label="Se déconnecter">
                    <i class="fas fa-sign-out-alt mr-2"></i>Déconnexion
                </a>
            {% else %}
                <a href="{{ path('app_register') }}" class="hover:bg-gray-700 hover:rounded-lg text-white px-4 py-2 rounded-lg inline-block transition-all duration-300 font-playfair" aria-label="S'inscrire">
                    <i class="fas fa-user-plus mr-2"></i>Inscription
                </a>
                <a href="{{ path('app_login') }}" class="hover:bg-gray-700 hover:rounded-lg text-white px-4 py-2 rounded-lg inline-block transition-all duration-300 font-playfair" aria-label="Se connecter">
                    <i class="fas fa-sign-in-alt mr-2"></i>Connexion
                </a>
            {% endif %}
        </div>
    </div>

    <!-- Menu Mobile -->
    <nav id="mobile-menu" class="hidden bg-gray-800 text-white lg:hidden">
        <ul class="flex flex-col space-y-4 p-4">
            <li><a href="{{ path('app') }}" class="hover:bg-gray-700 hover:rounded-lg px-4 py-2 transition-all duration-300 font-playfair">
                    <i class="fas fa-home mr-2"></i>Accueil
                </a></li>
            <li><a href="{{ path('app_collections') }}" class="hover:bg-gray-700 hover:rounded-lg px-4 py-2 transition-all duration-300 font-playfair">
                    <i class="fas fa-car mr-2"></i>Véhicules
                </a></li>
            {% if app.user %}
                {% if is_granted('ROLE_ADMIN') %}
                    <li><a href="{{ path('admin_dashboard') }}" class="hover:bg-gray-700 hover:rounded-lg px-4 py-2 transition-all duration-300 font-playfair">
                            <i class="fas fa-cogs mr-2"></i>Administrateur
                        </a></li>
                {% endif %}
                <!-- Liens visibles uniquement pour les utilisateurs NON admin -->
                {% if not is_granted('ROLE_ADMIN') %}
                    <li><a href="{{ path('app_favorite_show') }}" class="hover:bg-gray-700 hover:rounded-lg px-4 py-2 transition-all duration-300 font-playfair">
                            <i class="fas fa-heart mr-2"></i>Favoris
                        </a></li>
                    <li><a href="{{ path('app_all_reservation', {'clientId': app.user.id}) }}" class="hover:bg-gray-700 hover:rounded-lg px-4 py-2 transition-all duration-300 font-playfair">
                            <i class="fas fa-calendar-check mr-2"></i>Réservations
                        </a></li>
                    <li><a href="{{ path('app_invoice', {'clientId': app.user.id}) }}" class="hover:bg-gray-700 hover:rounded-lg px-4 py-2 transition-all duration-300 font-playfair">
                            <i class="fas fa-file-invoice mr-2"></i>Factures
                        </a></li>
                {% endif %}
                <li><a href="{{ path('app_notifications') }}" class="hover:bg-gray-700 hover:rounded-lg px-4 py-2 transition-all duration-300 font-playfair">
                        <i class="fas fa-bell mr-2"></i>Notifications
                    </a></li>
            {% else %}
                <li><a href="{{ path('app_login') }}" class="hover:bg-gray-700 hover:rounded-lg px-4 py-2 transition-all duration-300 font-playfair">
                        <i class="fas fa-sign-in-alt mr-2"></i>Connexion
                    </a></li>
                <li><a href="{{ path('app_register') }}" class="hover:bg-gray-700 hover:rounded-lg px-4 py-2 transition-all duration-300 font-playfair">
                        <i class="fas fa-user-plus mr-2"></i>Inscription
                    </a></li>
            {% endif %}
            <li><a href="{{ path('app_contact') }}" class="hover:bg-gray-700 hover:rounded-lg px-4 py-2 transition-all duration-300 font-playfair">
                    <i class="fas fa-envelope mr-2"></i>Contact
                </a></li>
        </ul>
    </nav>

</header>

<script>
    const hamburger = document.getElementById('hamburger');
    const mobileMenu = document.getElementById('mobile-menu');

    hamburger.addEventListener('click', () => {
        mobileMenu.classList.toggle('hidden');
    });
</script>