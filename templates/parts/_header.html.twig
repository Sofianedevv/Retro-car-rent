<header class="sticky top-0 z-50 bg-gray-900 shadow-md font-playfair">
    <div class="container mx-auto flex justify-between items-center py-4">
        <a href="{{ path('app') }}" class="flex items-center">
            <div>
                <img src="{{ asset('template-html/assets/images/logosvg.svg') }}" alt="Logo" class="h-14 w-auto mr-4">
            </div>
        </a>
        <div class="flex lg:hidden">
            <button id="hamburger" class="text-black focus:outline-none">
                <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path>
                </svg>
            </button>
        </div>

        <!-- Navigation (Desktop) -->
        <nav class="hidden lg:flex md:flex-grow justify-center">
            <ul class="flex justify-center space-x-2 text-white">
                <li><a href="{{ path('app') }}" class="hover:bg-gray-700 hover:rounded-lg px-4 py-2 transition-all duration-300 font-playfair mr-2" aria-label="Page d'accueil">
                        <i class="fas fa-home mr-2"></i>Accueil
                    </a></li>
                <li><a href="{{ path('app_collections') }}" class="hover:bg-gray-700 hover:rounded-lg px-4 py-2 transition-all duration-300 font-playfair" aria-label="Collections de véhicules">
                        <i class="fas fa-car mr-2"></i>Véhicules
                    </a></li>
                {% if app.user %}
                    {% if is_granted('ROLE_ADMIN') %}
                        <li><a href="{{ path('admin_dashboard') }}" class="hover:bg-gray-700 hover:rounded-lg px-4 py-2 transition-all duration-300 font-playfair" aria-label="Tableau de bord administrateur">
                                <i class="fas fa-cogs mr-2"></i>Administrateur
                            </a></li>
                    {% endif %}

                    <!-- Empêche les administrateurs de voir les sections suivantes -->
                    {% if not is_granted('ROLE_ADMIN') %}
                        <li><a href="{{ path('app_favorite_show') }}" class="hover:bg-gray-700 hover:rounded-lg px-4 py-2 transition-all duration-300 font-playfair" aria-label="Liste des favoris">
                                <i class="fas fa-heart mr-2"></i>Favoris
                            </a></li>
                        <li><a href="{{ path('app_all_reservation', {'clientId': app.user.id}) }}" class="hover:bg-gray-700 hover:rounded-lg px-4 py-2 transition-all duration-300 font-playfair" aria-label="Réservations">
                                <i class="fas fa-calendar-check mr-2"></i>Réservations
                            </a></li>
                        <li><a href="{{ path('app_invoice', {'clientId': app.user.id}) }}" class="hover:bg-gray-700 hover:rounded-lg px-4 py-2 transition-all duration-300 font-playfair" aria-label="Factures">
                                <i class="fas fa-file-invoice mr-2"></i>Factures
                            </a></li>
                    {% endif %}

                    <li class="relative">
                        <a href="{{ path('app_notifications') }}" class="hover:text-gray-600 font-playfair font-bold block py-2 relative">
                            <span class="relative inline-block">
                                Notifications
                                {% if unread_notifications_count > 0 %}
                                    <span class="absolute -top-2 -right-2 flex items-center justify-center w-5 h-5 text-xs text-white bg-red-500 rounded-full animate-pulse" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif; line-height: 1; font-weight: 500;">
                                        {{ unread_notifications_count }}
                                    </span>
                                {% endif %}
                            </span>
                        </a>
                    </li>
                {% endif %}
                <li>
                    <a href="{{ path('app_contact') }}" class="hover:text-gray-600 font-playfair font-bold block py-2">Contact</a>
                </li>
            </ul>
        </nav>

        <!-- Profil et Connexion (Desktop) -->
        <div class="hidden lg:flex items-center space-x-2 relative">
            {% if app.user %}
                <a href="{{ path('app_profile') }}" class="hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-all duration-300 font-playfair" aria-label="Profil utilisateur">
                    <i class="fas fa-user mr-2"></i>{{ app.user.firstName }}
                </a>
                <a href="{{ path('app_logout') }}" class="hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-all duration-300 font-playfair" aria-label="Se déconnecter">
                    <i class="fas fa-sign-out-alt mr-2"></i>Déconnexion
                </a>
            {% else %}
                <a href="{{ path('app_register') }}" class="hover:bg-gray-700 hover:rounded-lg text-white px-4 py-2 rounded-lg inline-block transition-all duration-300 font-playfair" aria-label="S'inscrire">
                    <i class="fas fa-user-plus mr-2"></i>Inscription
                </a>
                <a href="{{ path('app_login') }}" class="hover:bg-gray-700 hover:rounded-lg text-white px-4 py-2 rounded-lg inline-block transition-all duration-300 font-playfair" aria-label="Se connecter">
                    <i class="fas fa-sign-in-alt mr-2"></i>Connexion
                </a>
            {% endif %}
        </div>
    </div>
</header>

<!-- Menu mobile -->
<nav id="mobile-menu-placeholder" class="mobile-menu hidden lg:hidden bg-[#F5F5F0] border-t border-gray-200">
    <ul class="w-full text-center space-y-4 py-4">
        <li><a href="{{ path('app') }}" class="block py-2 text-black hover:text-gray-600 font-playfair">Accueil</a></li>
        <li><a href="{{ path('app_collections') }}" class="block py-2 text-black hover:text-gray-600 font-playfair">Nos Véhicules</a></li>
        
        {% if app.user %}
            {% if is_granted('ROLE_ADMIN') %}
                <li><a href="{{ path('admin_dashboard') }}" class="block py-2 text-black hover:text-gray-600 font-playfair">Dashboard Admin</a></li>
            {% endif %}
            
            <li><a href="{{ path('app_favorite_show') }}" class="block py-2 text-black hover:text-gray-600 font-playfair">Vos favoris</a></li>
            <li><a href="{{ path('app_notifications') }}" class="block py-2 text-black hover:text-gray-600 font-playfair">Notifications</a></li>
            <li><a href="{{ path('app_profile') }}" class="block py-2 text-black hover:text-gray-600 font-playfair">Profil</a></li>
            <li><a href="{{ path('app_logout') }}" class="block py-2 text-black hover:text-gray-600 font-playfair">Déconnexion</a></li>
        {% else %}
            <li><a href="{{ path('app_register') }}" class="block py-2 text-black hover:text-gray-600 font-playfair">Inscription</a></li>
            <li><a href="{{ path('app_login') }}" class="block py-2 text-black hover:text-gray-600 font-playfair">Connexion</a></li>
        {% endif %}
    </ul>
</nav>